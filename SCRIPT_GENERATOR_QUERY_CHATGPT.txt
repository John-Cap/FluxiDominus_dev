My mongo db documents look like this:

{
  "timestamp": {
    "$date": "2024-09-19T19:45:02.513Z"
  },
  "metadata": {
    "testlistId": 298,
    "testrunId": 122,
    "timestamp": {
      "$date": "2024-09-19T19:44:52.809Z"
    }
  },
  "data": {
    "meemah": "123",
    "anotherField": {
      "aNestedField": 1
    }
  }
}

This function is supposed to fetch documents according to a query:

    def fetchTimeSeriesData(self, testlistId, testrunId, startTime: datetime = None, endTime: datetime = None, nestedField: str = None, nestedValue=None):
        # Prepare the query with required filters
        query = {
            'metadata':{
                'testlistId': testlistId,
                'testrunId': testrunId
            }
        }

        # Add time filtering to the query if provided
        if startTime and endTime: 
            query['metadata']['timestamp'] = {'$gte': startTime, '$lte': endTime}

        # Add nested field filtering if provided
        if (nestedField and nestedValue): #Include 'field':value requirement to search
            query[nestedField] = nestedValue
        elif nestedField:
            query[nestedField] = {'$exists': True} #Fetch if nested field exists regardless of value
        # Fetch and sort the data
        cursor = self.collection.find(query).sort('timestamp', 1)
        _ret = []
        _num = 0
        for document in cursor:
            _ret.append(document)
            _num += 1

        # Uncomment the line below to print the number of fetched documents
        print(f'Fetched {_num} documents for experiment {testlistId} from {startTime} to {endTime} with nested field {nestedField} = {nestedValue}!')
        return _ret
    
It's not fetching anything